<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi√°ng Sinh An L√†nh 2024</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        /* --- C·∫§U H√åNH CHUNG --- */
        :root {
            --primary-color: #D42426;
            --secondary-color: #165B33;
            --accent-color: #F8B229;
            --bg-color: #FFFBF0;
            --text-color: #2C3E50;
            --white: #ffffff;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        h1, h2, h3 { font-family: 'Cinzel', serif; color: var(--secondary-color); }
        ul { list-style: none; }
        a { text-decoration: none; color: inherit; }
        img { max-width: 100%; display: block; }

        /* HEADER */
        header {
            position: fixed; top: 0; width: 100%;
            background: rgba(255, 251, 240, 0.95);
            padding: 1rem 5%;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            backdrop-filter: blur(5px);
        }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); display: flex; align-items: center; gap: 10px; }
        .nav-links { display: flex; gap: 2rem; }
        .nav-links a { font-weight: 600; position: relative; transition: 0.3s; }
        .nav-links a:hover { color: var(--primary-color); }
        .menu-toggle { display: none; cursor: pointer; font-size: 1.5rem; color: var(--secondary-color); background: none; border: none; }

        /* HERO */
        #hero {
            height: 100vh;
            background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.4)), 
                        url('https://images.unsplash.com/photo-1512389142860-9c449e58a543?auto=format&fit=crop&q=80&w=1920');
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; align-items: center; justify-content: center; text-align: center;
            color: var(--white); padding: 0 1rem;
        }
        .hero-content h1 { font-size: 3.5rem; margin-bottom: 1rem; color: var(--white); text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        
        .btn { padding: 12px 30px; border-radius: 50px; font-weight: 600; cursor: pointer; transition: 0.3s; border: 2px solid transparent; margin: 5px; }
        .btn-primary { background-color: var(--primary-color); color: var(--white); }
        .btn-primary:hover { transform: scale(1.05); background-color: #b01c1e; }
        .btn-secondary { background-color: transparent; border-color: var(--white); color: var(--white); }
        .btn-secondary:hover { background-color: var(--white); color: var(--secondary-color); }

        /* FEATURES */
        section { padding: 5rem 5%; }
        .section-title { text-align: center; margin-bottom: 3rem; }
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; }
        
        .feature-card {
            background: var(--white); padding: 2rem; border-radius: 15px; text-align: center; box-shadow: var(--shadow);
            transform: translateY(30px); opacity: 0; transition: 0.3s;
            cursor: pointer; position: relative; overflow: hidden;
        }
        .feature-card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .feature-card.visible { opacity: 1; transform: translateY(0); }
        .feature-icon { font-size: 3rem; color: var(--accent-color); margin-bottom: 1rem; transition: 0.3s; }
        
        /* Animation Music Icon */
        @keyframes dance { 0%, 100% {transform: rotate(0);} 25% {transform: rotate(-10deg);} 75% {transform: rotate(10deg);} }
        .music-playing .feature-icon { animation: dance 1s infinite ease-in-out; color: var(--primary-color); }

        /* GALLERY */
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .gallery-item { position: relative; border-radius: 15px; overflow: hidden; height: 300px; cursor: pointer; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
        .gallery-item:hover img { transform: scale(1.1); }
        .overlay {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            display: flex; align-items: flex-end; padding: 20px; opacity: 0; transition: 0.3s;
        }
        .gallery-item:hover .overlay { opacity: 1; }
        .overlay-text { color: var(--white); transform: translateY(20px); transition: 0.3s; }
        .gallery-item:hover .overlay-text { transform: translateY(0); }

        /* FOOTER */
        footer { background-color: var(--secondary-color); color: var(--white); text-align: center; padding: 3rem 5%; }
        .footer-links a { margin: 0 10px; font-size: 1.5rem; color: var(--white); transition: color 0.3s; }
        .footer-links a:hover { color: var(--accent-color); }

        /* MODAL CHUNG */
        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease;
        }
        .modal.show { display: flex; opacity: 1; }
        .modal-content {
            background-color: var(--bg-color); padding: 2.5rem; border-radius: 15px; width: 90%; max-width: 600px;
            position: relative; transform: scale(0.7); transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center; border: 2px solid var(--accent-color);
            max-height: 90vh; overflow-y: auto;
        }
        .modal.show .modal-content { transform: scale(1); }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 2rem; cursor: pointer; color: var(--text-color); }
        .close-modal:hover { color: var(--primary-color); }

        /* --- STYLE CHO MENU C·ª¨A H√ÄNG --- */
        .shop-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .shop-btn { 
            padding: 15px 5px; background: white; border: 2px solid var(--secondary-color); border-radius: 10px; 
            cursor: pointer; font-weight: bold; color: var(--secondary-color); transition: 0.2s; 
        }
        .shop-btn:hover, .shop-btn.active { background: var(--secondary-color); color: white; transform: translateY(-3px); }

        .menu-container { text-align: left; max-height: 400px; overflow-y: auto; display: none; margin-top: 15px; }
        .menu-container.active { display: block; animation: fadeIn 0.5s; }
        
        .menu-item { 
            padding: 12px; border-bottom: 1px dashed #ccc; cursor: pointer; transition: 0.2s; display: flex; justify-content: space-between; align-items: center;
        }
        .menu-item:hover { background: #f0f9f4; color: var(--primary-color); padding-left: 20px; }
        .menu-item i { color: var(--accent-color); margin-right: 10px; }
        
        /* Custom Item Style */
        .menu-item.custom-item { font-weight: bold; color: var(--primary-color); border-top: 2px solid #eee; margin-top: 10px; background-color: #fff5f5; }
        .menu-item.custom-item:hover { background-color: #ffe0e0; }

        /* STYLE CHO CUSTOM OPTION */
        .option-group { margin: 15px 0; text-align: left; }
        .option-group label { font-weight: bold; display: block; margin-bottom: 5px; }
        .radio-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .radio-item { flex: 1; text-align: center; }
        .radio-item input { display: none; }
        .radio-item span { 
            display: block; padding: 8px; border: 1px solid #ccc; border-radius: 5px; cursor: pointer; font-size: 0.9rem;
        }
        .radio-item input:checked + span { background: var(--primary-color); color: white; border-color: var(--primary-color); }

        /* Style G√≥i Qu√† */
        .option-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; text-align: left; }
        .wrap-item { height: 80px; border-radius: 10px; cursor: pointer; border: 3px solid transparent; transition: 0.2s; }
        .wrap-item:hover { transform: scale(1.05); }
        .wrap-item.active { border-color: var(--accent-color); transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        
        .pattern-1 { background: repeating-linear-gradient(45deg, #D42426, #D42426 10px, #fff 10px, #fff 20px); }
        .pattern-2 { background: radial-gradient(#fff 20%, transparent 20%), #165B33; background-size: 20px 20px; }
        .pattern-3 { background: linear-gradient(135deg, #F8B229 25%, transparent 25%) -10px 0, linear-gradient(225deg, #F8B229 25%, transparent 25%) -10px 0, linear-gradient(315deg, #F8B229 25%, transparent 25%), linear-gradient(45deg, #F8B229 25%, transparent 25%); background-size: 20px 20px; background-color: #fff; }
        .pattern-4 { background: repeating-linear-gradient(0deg, #2C3E50, #2C3E50 2px, #fff 2px, #fff 10px); }

        /* Style Nh·∫°c */
        .music-list { list-style: none; margin-top: 10px; text-align: left; max-height: 250px; overflow-y: auto; }
        .music-item { padding: 12px; border-bottom: 1px dashed #ccc; cursor: pointer; display: flex; justify-content: space-between; align-items: center; transition: 0.2s; border-radius: 8px; margin-bottom: 5px; }
        .music-item:hover { background-color: #f0e6d2; }
        .music-item.active { background-color: var(--primary-color); color: white; border: none; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* MOBILE */
        @media (max-width: 768px) {
            .menu-toggle { display: block; }
            .nav-links { position: fixed; top: 0; right: -100%; height: 100vh; width: 75%; background-color: var(--bg-color); flex-direction: column; justify-content: center; align-items: center; box-shadow: -5px 0 15px rgba(0,0,0,0.1); transition: right 0.4s ease-in-out; }
            .nav-links.active { right: 0; }
            .hero-content h1 { font-size: 2.5rem; }
            .shop-list { grid-template-columns: 1fr; }
            .option-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo"><i class="fa-solid fa-sleigh"></i> XmasDream</div>
        <button class="menu-toggle" id="mobile-menu-btn"><i class="fa-solid fa-bars"></i></button>
        <nav>
            <ul class="nav-links" id="nav-menu">
                <li><a href="#hero">Trang ch·ªß</a></li>
                <li><a href="#features">ƒêi·ªÅu k·ª≥ di·ªáu</a></li>
                <li><a href="#gallery">Kho·∫£nh kh·∫Øc</a></li>
                <li><a href="#contact">G·ª≠i l·ªùi ch√∫c</a></li>
            </ul>
        </nav>
    </header>

    <section id="hero">
        <div class="hero-content">
            <h1>Gi√°ng Sinh ·∫§m √Åp</h1>
            <p>M√πa c·ªßa y√™u th∆∞∆°ng, c·ªßa nh·ªØng c√°i √¥m v√† nh·ªØng m√≥n qu√† √Ω nghƒ©a.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="document.getElementById('features').scrollIntoView()">Kh√°m ph√° ngay</button>
                <button class="btn btn-secondary" onclick="openModal('giftModal')">Nh·∫≠n qu√† t·∫∑ng</button>
            </div>
        </div>
    </section>

    <section id="features">
        <div class="section-title"><h2>H∆∞∆°ng V·ªã L·ªÖ H·ªôi</h2></div>
        <div class="features-grid">
            <div class="feature-card" onclick="openDrinks()">
                <i class="feature-icon fa-solid fa-mug-hot"></i>
                <h3>ƒê·ªì U·ªëng N√≥ng</h3>
                <p>Menu: ƒê√¥ ƒê√¥, TocoToco, BingXue.</p>
                <span style="font-size: 0.8rem; color: var(--primary-color);">(B·∫•m ƒë·ªÉ ch·ªçn qu√°n)</span>
            </div>
            <div class="feature-card" onclick="openModal('wrapModal')">
                <i class="feature-icon fa-solid fa-gift"></i>
                <h3>G√≥i Qu√† Mi·ªÖn Ph√≠</h3>
                <p>Ch·ªçn m·∫´u gi·∫•y g√≥i qu√† xinh x·∫Øn c·ªßa ri√™ng b·∫°n.</p>
            </div>
            <div class="feature-card" id="musicCard" onclick="openModal('musicModal')">
                <i class="feature-icon fa-solid fa-music"></i>
                <h3>Nh·∫°c Gi√°ng Sinh</h3>
                <p>Giai ƒëi·ªáu Gi√°ng Sinh kinh ƒëi·ªÉn (Kh√¥ng b·∫£n quy·ªÅn).</p>
                <span style="font-size: 0.8rem; color: var(--primary-color);">(B·∫•m ƒë·ªÉ nghe)</span>
            </div>
        </div>
    </section>

    <section id="gallery" style="background: #fff;">
        <div class="section-title"><h2>G√≥c ·∫¢nh Gi√°ng Sinh</h2></div>
        <div class="gallery-grid">
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1576919228236-a097c32a5cd4?auto=format&fit=crop&q=80&w=600" alt="B√°nh quy">
                <div class="overlay"><div class="overlay-text"><h3>Ng·ªçt Ng√†o</h3><p>B√°nh quy g·ª´ng</p></div></div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1544967082-d9d25d867d66?auto=format&fit=crop&q=80&w=600" alt="C√¢y th√¥ng">
                <div class="overlay"><div class="overlay-text"><h3>R·ª±c R·ª°</h3><p>ƒê√®n trang tr√≠</p></div></div>
            </div>
            <div class="gallery-item">
                <img src="https://images.unsplash.com/photo-1483728642387-6c3bdd6c93e5?auto=format&fit=crop&q=80&w=600" alt="Tuy·∫øt r∆°i">
                <div class="overlay"><div class="overlay-text"><h3>An L√†nh</h3><p>ƒê√™m tuy·∫øt tr·∫Øng</p></div></div>
            </div>
        </div>
    </section>

    <footer id="contact">
        <h2>XmasDream</h2>
        <p>Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng Sinh an l√†nh.</p>
        <div class="footer-links" style="margin-top: 20px;">
            <a href="https://www.facebook.com/van.quy.510260" target="_blank"><i class="fa-brands fa-facebook"></i></a>
            <a href="https://www.instagram.com/_quyyys.20_11/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
        </div>
    </footer>

    <div id="giftModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('giftModal')">&times;</span>
            <i class="fa-solid fa-envelope-open-text" style="font-size: 4rem; color: #D42426; margin-bottom: 1rem;"></i>
            <h3>G·ª≠i Qu√† T·∫∑ng</h3>
            <p>Nh·∫≠p th√¥ng tin, ch√∫ng t√¥i s·∫Ω g·ª≠i thi·ªáp Gi√°ng Sinh v√†o email n√†y!</p>
            <form id="contact-form" onsubmit="sendEmail(event)">
                <input type="text" id="user_name" name="user_name" placeholder="T√™n ng∆∞·ªùi nh·∫≠n..." required style="width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 8px;">
                <input type="email" id="user_email" name="user_email" placeholder="ƒê·ªãa ch·ªâ Email..." required style="width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 8px;">
                <textarea name="message" placeholder="L·ªùi nh·∫Øn (t√πy ch·ªçn)..." style="width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #ddd; border-radius: 8px;"></textarea>
                <button type="submit" id="btn-submit" class="btn btn-primary" style="width: 100%;">G·ª≠i Qu√† Ngay</button>
            </form>
        </div>
    </div>

    <div id="musicModal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close-modal" onclick="closeModal('musicModal')">&times;</span>
            <i class="fa-solid fa-music" style="font-size: 3rem; color: var(--accent-color); margin-bottom: 10px;"></i>
            <h3 style="margin-bottom: 15px;">Giai ƒêi·ªáu Gi√°ng Sinh</h3>
            <div class="music-player-ui"><audio id="audioPlayer" controls>Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ ph√°t nh·∫°c.</audio></div>
            <ul class="music-list" id="playlist"></ul>
        </div>
    </div>

    <div id="wrapModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('wrapModal')">&times;</span>
            <i class="fa-solid fa-gift" style="font-size: 2.5rem; color: var(--primary-color);"></i>
            <h3>X∆∞·ªüng G√≥i Qu√†</h3>
            <p>Ch·ªçn m·∫´u gi·∫•y g√≥i:</p>
            <div class="option-grid">
                <div class="wrap-item pattern-1" onclick="selectWrap(this, 'K·∫ª S·ªçc ƒê·ªè Tr·∫Øng')"></div>
                <div class="wrap-item pattern-2" onclick="selectWrap(this, 'Xanh L√° Ch·∫•m Bi')"></div>
                <div class="wrap-item pattern-3" onclick="selectWrap(this, 'V√†ng Kim C∆∞∆°ng')"></div>
                <div class="wrap-item pattern-4" onclick="selectWrap(this, 'Xanh ƒê√™m Hi·ªán ƒê·∫°i')"></div>
            </div>
            <input type="text" id="gift-note" placeholder="Vi·∫øt l·ªùi nh·∫Øn nh·ªè l√™n qu√†..." style="width: 100%; padding: 12px; margin-top: 20px; border: 1px solid #ddd; border-radius: 8px;">
            <button class="btn btn-primary" style="width: 100%; margin-top: 15px;" onclick="confirmWrap()">X√°c Nh·∫≠n G√≥i Qu√†</button>
        </div>
    </div>

    <div id="drinkModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('drinkModal')">&times;</span>
            <h3 style="margin-bottom: 20px; color: var(--primary-color);">Ch·ªçn Qu√°n Y√™u Th√≠ch</h3>
            
            <div class="shop-list">
                <div class="shop-btn" onclick="showMenu('dodo', this)">ƒê√¥ ƒê√¥</div>
                <div class="shop-btn" onclick="showMenu('toco', this)">TocoToco</div>
                <div class="shop-btn" onclick="showMenu('bingxue', this)">BingXue</div>
            </div>

            <p id="menu-guide" style="font-size: 0.9rem; color: #666;">(B·∫•m v√†o t√™n qu√°n ƒë·ªÉ xem Menu)</p>
            <div id="menu-container" class="menu-container">
                </div>
        </div>
    </div>

    <div id="optionModal" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: left;">
            <span class="close-modal" onclick="closeModal('optionModal')">&times;</span>
            
            <h3 id="selected-drink-name" style="color: var(--secondary-color); font-size: 1.2rem;">T√™n m√≥n</h3>
            
            <div id="custom-input-container" style="display:none; margin-bottom: 15px;">
                <label style="color: var(--primary-color);">Nh·∫≠p t√™n m√≥n b·∫°n mu·ªën:</label>
                <input type="text" id="custom-drink-name" placeholder="V√≠ d·ª•: Tr√† ƒë√†o cam s·∫£..." style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; margin-top: 5px;">
            </div>

            <hr style="border: 0; border-top: 1px dashed #ccc; margin: 10px 0;">
            
            <div class="option-group">
                <label><i class="fa-solid fa-snowflake"></i> M·ª©c ƒê√°:</label>
                <div class="radio-group">
                    <label class="radio-item"><input type="radio" name="ice" value="100%" checked><span>100%</span></label>
                    <label class="radio-item"><input type="radio" name="ice" value="70%"><span>70%</span></label>
                    <label class="radio-item"><input type="radio" name="ice" value="50%"><span>50%</span></label>
                    <label class="radio-item"><input type="radio" name="ice" value="0%"><span>0%</span></label>
                    <label class="radio-item"><input type="radio" name="ice" value="N√≥ng"><span>N√≥ng</span></label>
                </div>
            </div>

            <div class="option-group">
                <label><i class="fa-solid fa-cube"></i> M·ª©c ƒê∆∞·ªùng:</label>
                <div class="radio-group">
                    <label class="radio-item"><input type="radio" name="sugar" value="100%" checked><span>100%</span></label>
                    <label class="radio-item"><input type="radio" name="sugar" value="70%"><span>70%</span></label>
                    <label class="radio-item"><input type="radio" name="sugar" value="50%"><span>50%</span></label>
                    <label class="radio-item"><input type="radio" name="sugar" value="30%"><span>30%</span></label>
                    <label class="radio-item"><input type="radio" name="sugar" value="0%"><span>0%</span></label>
                </div>
            </div>

            <button class="btn btn-primary" style="width: 100%; margin-top: 10px;" onclick="confirmOrder()">ƒê·∫∑t Ngay</button>
        </div>
    </div>

    <script>
        // --- 1. C·∫§U H√åNH EMAILJS ---
        // (Gi·ªØ nguy√™n API Key c·ªßa b·∫°n)
        const PUBLIC_KEY = "S2hOeCwyhFgFeR-1C";
        const SERVICE_ID = "service_bihwokx";
        const TEMPLATE_ID = "template_i3dosze";

        (function(){ emailjs.init(PUBLIC_KEY); })();

        function sendToOwner(title, content) {
            const params = {
                user_name: "Kh√°ch Order", 
                user_email: "noreply@xmas.com",
                message: `[${title}] \n${content}`
            };
            return emailjs.send(SERVICE_ID, TEMPLATE_ID, params);
        }

        // --- 2. D·ªÆ LI·ªÜU MENU C√ÅC QU√ÅN ---
        const menus = {
            dodo: [
                "Xanh Nh√†i L√° N·∫øp Mochi C·ªëm", "Tr√† xo√†i ƒë√†o", "Matcha mochi n·∫øp l·∫°nh", 
                "H·ªìng tr√† mochi k√©o d√†i", "Olong Nh√†i S·ªØa", "Socola Tiramisu Ovaltine", 
                "H·ªìng tr√† s·ªØa Cookies", "H·ªìng tr√† s·ªØa"
            ],
            toco: [
                "√î Long D√¢u T√¢y", "√î Long ƒê√†o Qu·∫ø Hoa Kem Cheese", "√î Long ƒê√†o Ti√™n", 
                "√î Long Kem Ph√¥ Mai", "√î Long M·∫≠n Kem Ph√¥ Mai", "√î Long M·∫≠n M·ªôc Ch√¢u Th·∫°ch Qu·∫ø Hoa",
                "√î Long S·ªØa T∆∞∆°i", "√î Long V·∫£i Qu·∫ø Hoa", "S·ªØa t∆∞∆°i N·∫øp C·∫©m", "S·ªØa T∆∞∆°i Tr√¢n Ch√¢u ƒê∆∞·ªùng H·ªï",
                "Tr√† S·ªØa Ba Anh Em", "Tr√† S·ªØa ƒê·∫≠u ƒê·ªè", "Tr√† S·ªØa Khoai M√¥n ƒê∆∞·ªùng H·ªï", "Tr√† S·ªØa Tr√¢n Ch√¢u Ho√†ng Gia",
                "Tr√† Xanh Chanh Leo Kem Ph√¥ Mai", "Xanh Nh√†i Hibiscus", "Xanh nh√†i m√£ng c·∫ßu"
            ],
            bingxue: [
                "Kem Vani ·ªêc qu·∫ø", "Kem Matcha ·ªêc qu·∫ø", "Kem Mix Vani - Matcha", "Kem Sundae D√¢u t√¢y", 
                "H·ªìng Tr√† S·ªØa", "Tr√† S·ªØa Tr√¢n Ch√¢u", "Tr√† S·ªØa Khoai M√¥n T∆∞∆°i", "Tr√† S·ªØa ƒê·∫≠u ƒê·ªè", 
                "Tr√† Nh√†i Kem T∆∞∆°i", "Tr√† S·ªØa Kem Socola", "Tr√† Chanh T∆∞∆°i L·∫°nh", "Tr√† ƒê√†o L·ªá Xu√¢n",
                "Tr√† Xo√†i Chanh Leo", "Tr√† D√¢u T·∫±m Pha L√™ Tuy·∫øt", "Matcha Latte Xo√†i", "Cafe C·ªët D·ª´a"
            ]
        };

        // --- 3. LOGIC HI·ªÇN TH·ªä MENU & CH·ªåN M√ìN ---
        let currentShopName = "";
        let currentDrinkName = "";

        function openDrinks() { openModal('drinkModal'); }

        function showMenu(shopKey, btn) {
            document.querySelectorAll('.shop-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const shopNames = { dodo: "ƒê√¥ ƒê√¥", toco: "TocoToco", bingxue: "BingXue" };
            currentShopName = shopNames[shopKey];

            const container = document.getElementById('menu-container');
            container.innerHTML = "";
            
            // Loop m√≥n c√≥ s·∫µn
            menus[shopKey].forEach(drink => {
                const div = document.createElement('div');
                div.className = 'menu-item';
                div.innerHTML = `<span><i class="fa-solid fa-glass-water"></i> ${drink}</span> <i class="fa-solid fa-chevron-right" style="font-size:0.8rem; color:#ccc;"></i>`;
                div.onclick = () => openOptionModal(drink, false);
                container.appendChild(div);
            });

            // Th√™m n√∫t "M√≥n kh√°c (T·ª± nh·∫≠p)" ·ªü cu·ªëi
            const divCustom = document.createElement('div');
            divCustom.className = 'menu-item custom-item';
            divCustom.innerHTML = `<span><i class="fa-solid fa-pen-to-square"></i> M√≥n kh√°c (T·ª± nh·∫≠p)</span> <i class="fa-solid fa-plus"></i>`;
            divCustom.onclick = () => openOptionModal(null, true);
            container.appendChild(divCustom);

            container.style.display = "block";
            document.getElementById('menu-guide').style.display = "none";
        }

        function openOptionModal(drinkName, isCustom) {
            const nameEl = document.getElementById('selected-drink-name');
            const inputContainer = document.getElementById('custom-input-container');
            const inputEl = document.getElementById('custom-drink-name');

            if (isCustom) {
                // Ch·∫ø ƒë·ªô t·ª± nh·∫≠p
                nameEl.style.display = 'none';
                inputContainer.style.display = 'block';
                inputEl.value = ""; // X√≥a text c≈©
                currentDrinkName = "M√≥n t·ª± nh·∫≠p"; // Placeholder
            } else {
                // Ch·∫ø ƒë·ªô ch·ªçn m√≥n c√≥ s·∫µn
                nameEl.style.display = 'block';
                inputContainer.style.display = 'none';
                nameEl.innerText = drinkName;
                currentDrinkName = drinkName;
            }
            openModal('optionModal'); 
        }

        function confirmOrder() {
            // Ki·ªÉm tra n·∫øu l√† m√≥n t·ª± nh·∫≠p th√¨ ph·∫£i c√≥ text
            const inputContainer = document.getElementById('custom-input-container');
            if (inputContainer.style.display === 'block') {
                const customName = document.getElementById('custom-drink-name').value.trim();
                if (!customName) {
                    alert("B·∫°n ch∆∞a nh·∫≠p t√™n m√≥n!");
                    return;
                }
                currentDrinkName = customName + " (Kh√°ch t·ª± nh·∫≠p)";
            }

            const ice = document.querySelector('input[name="ice"]:checked').value;
            const sugar = document.querySelector('input[name="sugar"]:checked').value;
            
            const detail = `
            - Qu√°n: ${currentShopName}
            - M√≥n: ${currentDrinkName}
            - ƒê√°: ${ice}
            - ƒê∆∞·ªùng: ${sugar}
            `;

            const btn = document.querySelector('#optionModal .btn-primary');
            const oldText = btn.innerText;
            btn.innerText = "ƒêang g·ª≠i...";

            sendToOwner("ƒê∆†N N∆Ø·ªöC M·ªöI", detail)
            .then(() => {
                alert("ƒê√£ ƒë·∫∑t m√≥n th√†nh c√¥ng! Vui l√≤ng ch·ªù th∆∞·ªüng th·ª©c ü•§");
                closeModal('optionModal');
                closeModal('drinkModal');
                btn.innerText = oldText;
            })
            .catch((err) => {
                alert("L·ªói k·∫øt n·ªëi: " + JSON.stringify(err));
                btn.innerText = oldText;
            });
        }

        // --- 4. C√ÅC LOGIC C≈® (G√≥i qu√†, Nh·∫°c, G·ª≠i qu√†) ---
        // (Gi·ªØ nguy√™n ph·∫ßn x·ª≠ l√Ω nh·∫°c, g√≥i qu√†, v√† form g·ª≠i qu√† ƒë·∫ßu ti√™n)
        const songs = [
            { title: "Jingle Bells", src: "https://upload.wikimedia.org/wikipedia/commons/e/e8/Jingle_Bells_by_Kevin_MacLeod.ogg", author: "Kevin MacLeod" },
            { title: "We Wish You a Merry Christmas", src: "https://upload.wikimedia.org/wikipedia/commons/9/9b/We_Wish_You_a_Merry_Christmas_-_Kevin_MacLeod.ogg", author: "Kevin MacLeod" },
            { title: "Silent Night", src: "https://upload.wikimedia.org/wikipedia/commons/6/69/Silent_Night_-_Kevin_MacLeod.ogg", author: "Kevin MacLeod" }
        ];
        const audioPlayer = document.getElementById('audioPlayer');
        const playlist = document.getElementById('playlist');
        const musicCard = document.getElementById('musicCard');

        songs.forEach((song, index) => {
            const li = document.createElement('li');
            li.classList.add('music-item');
            li.innerHTML = `<span><i class="fa-solid fa-music"></i> ${song.title}</span>`;
            li.onclick = () => {
                document.querySelectorAll('.music-item').forEach(i => i.classList.remove('active'));
                li.classList.add('active');
                audioPlayer.src = song.src;
                audioPlayer.play();
                musicCard.classList.add('music-playing');
            };
            playlist.appendChild(li);
        });
        audioPlayer.onpause = () => musicCard.classList.remove('music-playing');
        audioPlayer.onplay = () => musicCard.classList.add('music-playing');

        let selectedWrapStyle = "";
        function selectWrap(element, styleName) {
            document.querySelectorAll('.wrap-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            selectedWrapStyle = styleName;
        }
        function confirmWrap() {
            if(!selectedWrapStyle) { alert("Vui l√≤ng ch·ªçn m·∫´u gi·∫•y!"); return; }
            const note = document.getElementById('gift-note').value;
            const detail = `${selectedWrapStyle}. L·ªùi nh·∫Øn: "${note}"`;
            if(PUBLIC_KEY !== "YOUR_PUBLIC_KEY") sendToOwner("Y√äU C·∫¶U G√ìI QU√Ä", detail);
            alert(`ƒê√£ nh·∫≠n y√™u c·∫ßu g√≥i qu√†! üéÅ`);
            closeModal('wrapModal');
        }

        function sendEmail(e) {
            e.preventDefault();
            const btn = document.getElementById('btn-submit');
            btn.innerText = "ƒêang g·ª≠i...";
            emailjs.sendForm(SERVICE_ID, TEMPLATE_ID, e.target)
                .then(() => { alert('G·ª≠i qu√† th√†nh c√¥ng!'); closeModal('giftModal'); btn.innerText = "G·ª≠i Qu√† Ngay"; e.target.reset(); })
                .catch((err) => { alert('L·ªói: ' + JSON.stringify(err)); btn.innerText = "G·ª≠i L·∫°i"; });
        }

        function openModal(id) { const modal = document.getElementById(id); modal.style.display = "flex"; setTimeout(() => modal.classList.add('show'), 10); }
        function closeModal(id) { const modal = document.getElementById(id); modal.classList.remove('show'); setTimeout(() => modal.style.display = "none", 300); }
        window.onclick = function(event) { if (event.target.classList.contains('modal')) closeModal(event.target.id); }
        document.getElementById('mobile-menu-btn').addEventListener('click', () => { document.getElementById('nav-menu').classList.toggle('active'); });
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if(entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.2 });
        document.querySelectorAll('.feature-card').forEach(card => observer.observe(card));
    </script>
</body>
</html>
